<!DOCTYPE html>
<html>
<head>
    <title>AI Log Intelligence Engine</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">

    <h1 class="text-center mb-4">ðŸ§  AI Log Intelligence Engine</h1>

    <div class="card p-4 shadow-sm mb-4">
        <form method="POST" enctype="multipart/form-data">
            <input class="form-control mb-3" type="file" name="logfile" required>
            <button class="btn btn-dark w-100">Analyze Log</button>
        </form>
    </div>

    {% if analysis %}

    <!-- Severity Stats -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-center p-3 shadow-sm">
                <h6>ERROR</h6>
                <h3 class="text-danger">{{ stats.error }}</h3>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center p-3 shadow-sm">
                <h6>CRITICAL</h6>
                <h3 class="text-dark">{{ stats.critical }}</h3>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center p-3 shadow-sm">
                <h6>WARNING</h6>
                <h3 class="text-warning">{{ stats.warning }}</h3>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center p-3 shadow-sm">
                <h6>INFO</h6>
                <h3 class="text-primary">{{ stats.info }}</h3>
            </div>
        </div>
    </div>

    <!-- AI Analysis -->
    <div class="card p-4 shadow-sm mb-4">
        <h4>ðŸ“Œ AI Summary</h4>
        <p>{{ analysis.summary }}</p>

        <h4>ðŸ”Ž AI Root Cause</h4>
        <p>{{ analysis.root_cause }}</p>

        <h5>ðŸ¤– AI Risk Level</h5>
        <span class="badge bg-secondary">{{ analysis.risk_level }}</span>

        <h5 class="mt-3">ðŸ›  Recommendations</h5>
        <ul>
            {% for rec in analysis.recommendations %}
                <li>{{ rec }}</li>
            {% endfor %}
        </ul>
    </div>

    <!-- System Engine -->
    <div class="card p-4 shadow-sm mb-4">
        <h4>ðŸ§® System Risk Assessment</h4>

        {% if system_risk == "High" %}
            <span class="badge bg-danger">High</span>
        {% elif system_risk == "Medium" %}
            <span class="badge bg-warning text-dark">Medium</span>
        {% else %}
            <span class="badge bg-success">Low</span>
        {% endif %}

        <hr>

        <h5>ðŸ›¡ Detected Security Threats</h5>
        {% if threats %}
            <ul>
                {% for t in threats %}
                    <li class="text-danger">{{ t }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No security threats detected.</p>
        {% endif %}
    </div>

    <!-- Confidence -->
    <div class="card p-4 shadow-sm mb-4">
        <h5>AI Confidence Score</h5>
        <div class="progress">
            <div class="progress-bar bg-dark" style="width: {{ confidence }}%;">
                {{ confidence }}%
            </div>
        </div>
    </div>

    <!-- Download JSON -->
    <div class="text-center">
        <form method="POST" action="/download">
            <textarea name="analysis_json" hidden>{{ analysis | tojson }}</textarea>
            <button class="btn btn-outline-dark">Download JSON Report</button>
        </form>
    </div>

    {% endif %}

</div>

</body>
</html>




